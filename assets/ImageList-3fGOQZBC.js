import{j as s,s as m,A as j,r,a as u,b as v,c as f}from"./index-DaaLNiAT.js";const k=({urls:e,alt_description:t,onClick:a})=>s.jsx("li",{className:m.card,children:s.jsx("img",{src:e.regular,alt:t,onClick:a})});async function I(e){try{const t=await fetch(g(e));if(!t.ok)throw new Error("fetchData: invalid response");const a=await t.json(),o=a.downloads.total,l=a.views.total,i=a.likes.total;return{downloads:o,likes:i,views:l}}catch(t){return t.message}}function g(e){return`https://api.unsplash.com//photos/${e}/statistics/?client_id=${j}`}const y=({id:e,urls:t,alt_description:a,onCloseModal:o})=>{const[l,i]=r.useState(0),[c,n]=r.useState(0),[p,w]=r.useState(0);return r.useEffect(()=>{(async()=>{const{downloads:d,likes:x,views:h}=await I(e);i(d),w(h),n(x)})()},[]),s.jsx("div",{className:u.backdrop,onClick:o,children:s.jsxs("div",{onClick:d=>d.stopPropagation(),children:[s.jsx("button",{onClick:o,children:"Close"}),s.jsx("img",{src:t.full,alt:a,className:u["image-preview"]}),s.jsx("span",{children:l}),s.jsx("span",{children:c}),s.jsx("span",{children:p})]})})},_=({imageList:e})=>{const t={id:"",alt_description:"",urls:{}},[a,o]=r.useState(!1),[l,i]=r.useState(t),c=()=>{o(!1),i(t)};return s.jsx(s.Fragment,{children:s.jsxs("ul",{className:v.content,children:[e.map(n=>s.jsx(k,{urls:n.urls,alt_description:n.alt_description,id:n.id,onClick:()=>{i({id:n.id,alt_description:n.alt_description,urls:n.urls}),o(!0)}},n.id)),a&&f.createPortal(s.jsx(y,{...l,onCloseModal:c}),document.body)]})})};export{_ as default};
